<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ุชุณุฌูู ููุงุท - ุงูุฏููููู ู ุงูุญุฑูู</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center p-6">

  <h1 class="text-2xl font-bold mb-6">๐ฎ ุชุณุฌูู ููุงุท ุงูุฃูุนุงุจ</h1>

  <!-- ุงุฎุชูุงุฑ ุงููุนุจุฉ -->
  <div id="game-select" class="bg-white shadow-md p-6 rounded-2xl w-full max-w-md mb-6">
    <h2 class="text-lg font-semibold mb-4">ุงุฎุชุฑ ุงููุนุจุฉ</h2>
    <button onclick="chooseGame('harik')" class="bg-red-500 text-white px-4 py-2 rounded-lg w-full mb-2">๐ ูุนุจุฉ ุงูุญุฑูู</button>
    <button onclick="chooseGame('domino')" class="bg-blue-500 text-white px-4 py-2 rounded-lg w-full">๐ฒ ูุนุจุฉ ุงูุฏููููู</button>
  </div>

  <!-- ุฅุฏุฎุงู ุฃุณูุงุก ุงููุงุนุจูู -->
  <div id="player-setup" class="hidden bg-white shadow-md p-6 rounded-2xl w-full max-w-md mb-6">
    <h2 class="text-lg font-semibold mb-4">ุฅุถุงูุฉ ูุงุนุจูู</h2>
    <div id="players-inputs">
      <input type="text" placeholder="ุงุณู ุงููุงุนุจ 1" class="player-name border rounded p-2 mb-2 w-full">
      <input type="text" placeholder="ุงุณู ุงููุงุนุจ 2" class="player-name border rounded p-2 mb-2 w-full">
    </div>
    <button onclick="addPlayerInput()" class="bg-blue-500 text-white px-4 py-2 rounded-lg mt-2">โ ุฅุถุงูุฉ ูุงุนุจ</button>
    <button onclick="startGame()" class="bg-green-500 text-white px-4 py-2 rounded-lg mt-2 w-full">ุงุจุฏุฃ ุงููุนุจุฉ</button>
  </div>

  <!-- ููุญุฉ ุงูููุงุท -->
  <div id="scoreboard" class="hidden bg-white shadow-md p-6 rounded-2xl w-full max-w-3xl">
    <h2 class="text-lg font-semibold mb-4">ููุญุฉ ุงูููุงุท</h2>
    <table class="w-full border-collapse border border-gray-300 mb-4 text-center">
      <thead>
        <tr id="players-row" class="bg-gray-200"></tr>
      </thead>
      <tbody id="scores-body"></tbody>
      <tfoot>
        <tr id="totals-row" class="bg-yellow-100 font-bold"></tr>
      </tfoot>
    </table>
    <div class="flex gap-2">
      <button onclick="addRound()" class="bg-blue-600 text-white px-4 py-2 rounded-lg">โ ุฅุถุงูุฉ ุฌููุฉ</button>
      <button onclick="resetGame()" class="bg-red-500 text-white px-4 py-2 rounded-lg">๐ ุฅุนุงุฏุฉ ุชุนููู</button>
    </div>
    <p id="status-text" class="mt-4 font-bold text-lg text-green-600"></p>
  </div>

<script>
let players = [];
let scores = [];
let gameType = null;

function chooseGame(type) {
  gameType = type;
  document.getElementById("game-select").classList.add("hidden");
  document.getElementById("player-setup").classList.remove("hidden");
}

function addPlayerInput() {
  const div = document.getElementById("players-inputs");
  const input = document.createElement("input");
  input.type = "text";
  input.placeholder = `ุงุณู ุงููุงุนุจ ${div.children.length + 1}`;
  input.className = "player-name border rounded p-2 mb-2 w-full";
  div.appendChild(input);
}

function startGame() {
  const inputs = document.querySelectorAll(".player-name");
  players = Array.from(inputs).map(input => input.value.trim()).filter(Boolean);
  if (players.length < 2) {
    alert("ุฃุฏุฎู ุงุณู ูุงุนุจูู ุนูู ุงูุฃูู!");
    return;
  }

  document.getElementById("player-setup").classList.add("hidden");
  document.getElementById("scoreboard").classList.remove("hidden");

  // ุจูุงุก ุฌุฏูู ุงููุงุนุจูู
  const playersRow = document.getElementById("players-row");
  const totalsRow = document.getElementById("totals-row");
  playersRow.innerHTML = "<th class='border p-2'>ุงูุฌููุฉ</th>";
  totalsRow.innerHTML = "<td class='border p-2'>ุงููุฌููุน</td>";
  players.forEach(player => {
    playersRow.innerHTML += `<th class='border p-2'>${player}</th>`;
    totalsRow.innerHTML += `<td class='border p-2' id="total-${player}">0</td>`;
  });

  scores = [];
}

function addRound() {
  const roundIndex = scores.length + 1;
  const row = document.createElement("tr");
  row.innerHTML = `<td class='border p-2'>${roundIndex}</td>`;
  let roundScores = {};

  players.forEach(player => {
    row.innerHTML += `<td class='border p-2'>
      <input type='number' class='score-input w-20 border p-1 text-center' data-player='${player}' data-round='${roundIndex}'>
    </td>`;
    roundScores[player] = 0;
  });

  document.getElementById("scores-body").appendChild(row);
  scores.push(roundScores);

  // ูุชุงุจุนุฉ ุงูุญุณุงุจ ุนูุฏ ุฅุฏุฎุงู ุงูููุงุท
  row.querySelectorAll(".score-input").forEach(input => {
    input.addEventListener("input", updateTotals);
  });
}

function updateTotals() {
  players.forEach(player => {
    let total = 0;
    document.querySelectorAll(`.score-input[data-player='${player}']`).forEach(input => {
      total += Number(input.value) || 0;
    });
    document.getElementById(`total-${player}`).innerText = total;
  });
  checkStatus();
}

function checkStatus() {
  let totals = players.map(player => ({
    name: player,
    total: Number(document.getElementById(`total-${player}`).innerText)
  }));

  if (gameType === "harik") {
    let loser = totals.find(p => p.total >= 101);
    if (loser) {
      document.getElementById("status-text").innerText =
        `โ ${loser.name} ุฎุณุฑ ุงููุนุจุฉ (ูุตู ${loser.total} ููุทุฉ)`;
      return;
    }
    let leader = totals.reduce((min, p) => p.total < min.total ? p : min, totals[0]);
    document.getElementById("status-text").innerText =
      `๐ฅ ุงููุชุตุฏุฑ ุญุชู ุงูุขู: ${leader.name} (${leader.total} ููุทุฉ)`;
  }

  if (gameType === "domino") {
    let winner = totals.reduce((min, p) => p.total < min.total ? p : min, totals[0]);
    document.getElementById("status-text").innerText =
      `๐ ุงููุงุฆุฒ ุงููุคูุช: ${winner.name} (${winner.total} ููุทุฉ)`;
  }
}

function resetGame() {
  gameType = null;
  document.getElementById("game-select").classList.remove("hidden");
  document.getElementById("player-setup").classList.add("hidden");
  document.getElementById("scoreboard").classList.add("hidden");
  document.getElementById("scores-body").innerHTML = "";
  document.getElementById("players-row").innerHTML = "";
  document.getElementById("totals-row").innerHTML = "";
  document.getElementById("status-text").innerText = "";
}
</script>

</body>
</html>