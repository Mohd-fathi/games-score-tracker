<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù„Ø¹Ø¨Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø§Ø· - Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ†Ùˆ & Ø§Ù„Ø­Ø±ÙŠÙ‚</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body class="bg-gradient-to-r from-indigo-200 via-purple-200 to-pink-200 min-h-screen flex flex-col items-center justify-start py-6">

  <div class="w-full max-w-3xl bg-white shadow-2xl rounded-2xl p-6" x-data="scoreApp()">

    <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
    <h1 class="text-3xl font-extrabold text-center text-indigo-700 mb-6">ğŸ® ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø§Ø·</h1>

    <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„Ø¹Ø¨Ø© -->
    <div class="mb-6 text-center">
      <label class="font-semibold text-lg">Ø§Ø®ØªØ± Ø§Ù„Ù„Ø¹Ø¨Ø©:</label>
      <select x-model="selectedGame" class="p-2 border rounded-lg mx-2">
        <option value="">-- Ø§Ø®ØªØ± --</option>
        <option value="domino">Ø¯ÙˆÙ…ÙŠÙ†Ùˆ</option>
        <option value="harik">Ø§Ù„Ø­Ø±ÙŠÙ‚</option>
      </select>

      <!-- ØªØ­Ø¯ÙŠØ¯ Ù‡Ø¯Ù Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ†Ùˆ -->
      <div x-show="selectedGame==='domino'" class="mt-3">
        <label class="font-semibold">Ø§Ù„Ù„Ø¹Ø¨ Ø­ØªÙ‰:</label>
        <select x-model="dominoTarget" class="p-2 border rounded-lg">
          <option value="51">51</option>
          <option value="101">101</option>
        </select>
      </div>
    </div>

    <!-- Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† -->
    <div class="mb-6">
      <h2 class="text-xl font-bold text-gray-800 mb-2">ğŸ‘¥ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</h2>
      <div class="flex gap-2">
        <input type="text" x-model="singlePlayer" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨"
          class="flex-1 p-2 border rounded-lg">
        <button @click="addPlayer()" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600">â•</button>
      </div>
    </div>

    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† -->
    <div class="mb-6" x-show="players.length > 0">
      <h2 class="text-xl font-bold text-gray-800 mb-2">ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</h2>
      <template x-for="(player, index) in players" :key="index">
        <div class="flex items-center justify-between bg-gray-100 p-2 rounded-lg mb-2">
          <span class="font-semibold" x-text="player.name"></span>
          <div class="flex items-center gap-2">
            <input type="number" x-model.number="player.newScore" placeholder="Ø§Ù„Ù†Ù‚Ø§Ø·"
              class="w-20 p-1 border rounded-lg">
            <button @click="updateScore(index)" class="bg-blue-500 text-white px-3 py-1 rounded-lg hover:bg-blue-600">ØªØ­Ø¯ÙŠØ«</button>
            <button @click="removePlayer(index)" class="bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600">âŒ</button>
          </div>
        </div>
      </template>
    </div>

    <!-- Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
    <div class="mt-6" x-show="players.length > 0">
      <h2 class="text-xl font-bold text-gray-800 mb-4">ğŸ“Š Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h2>
      <table class="w-full border-collapse rounded-lg overflow-hidden shadow-md">
        <thead>
          <tr class="bg-gray-200 text-gray-700">
            <th class="py-2 px-4 text-left">Ø§Ù„Ù„Ø§Ø¹Ø¨</th>
            <th class="py-2 px-4 text-center">Ø§Ù„Ù†Ù‚Ø§Ø·</th>
            <th class="py-2 px-4 text-center">Ø§Ù„Ø­Ø§Ù„Ø©</th>
          </tr>
        </thead>
        <tbody>
          <template x-for="player in players" :key="player.name">
            <tr 
              class="border-b"
              :class="{
                'bg-red-100 text-red-600 font-bold': loser && loser.name === player.name,
                'bg-green-100 text-green-600 font-bold': winner && winner.name === player.name,
                'bg-white text-gray-800': !loser || (!loser.name && !winner.name)
              }"
            >
              <td class="py-2 px-4" x-text="player.name"></td>
              <td class="py-2 px-4 text-center" x-text="player.score"></td>
              <td class="py-2 px-4 text-center">
                <span x-show="loser && loser.name === player.name">âŒ Ø®Ø§Ø³Ø±</span>
                <span x-show="winner && winner.name === player.name">ğŸ† ÙØ§Ø¦Ø²</span>
                <span x-show="!loser || (!loser.name && !winner.name)">â€”</span>
              </td>
            </tr>
          </template>
        </tbody>
      </table>

      <!-- Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© -->
      <div class="mt-4 text-center">
        <button @click="resetGame()" class="bg-yellow-500 text-white px-6 py-2 rounded-lg hover:bg-yellow-600 shadow-md">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
      </div>
    </div>

    <!-- ØªØ°ÙŠÙŠÙ„ -->
    <footer class="mt-6 text-center text-sm text-gray-500">
      ğŸ‘¨â€ğŸ’» Ø§Ù„ØªØµÙ…ÙŠÙ… Ø¨ÙˆØ§Ø³Ø·Ø© <span class="font-bold text-indigo-600">Mohd-Fathi</span>
    </footer>
  </div>

  <script>
    function scoreApp() {
      return {
        selectedGame: "",
        dominoTarget: 51,
        players: [],
        loser: null,
        winner: null,
        singlePlayer: "",

        // Ø¥Ø¶Ø§ÙØ© Ù„Ø§Ø¹Ø¨
        addPlayer() {
          if (this.singlePlayer.trim()) {
            this.players.push({ name: this.singlePlayer.trim(), score: 0, newScore: 0 });
            this.singlePlayer = "";
            this.resetResults();
          }
        },

        // Ø­Ø°Ù Ù„Ø§Ø¹Ø¨
        removePlayer(index) {
          this.players.splice(index, 1);
          this.resetResults();
        },

        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        resetResults() {
          this.loser = null;
          this.winner = null;
        },

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ù‚Ø§Ø·
        updateScore(index) {
          let target = this.selectedGame === "domino" ? this.dominoTarget : 31;

          if (!this.players[index].newScore || this.players[index].newScore <= 0) return;

          this.players[index].score += this.players[index].newScore;
          this.players[index].newScore = 0;

          // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ø¨Ø§Ø´Ø±Ø©
          this.calculateResults(target);
        },

        // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        calculateResults(target) {
          let loser = this.players.find(p => p.score >= target);

          if (loser) {
            this.loser = loser;
            this.winner = this.players.reduce((min, p) => 
              p.score < min.score ? p : min, this.players[0]);
          } else {
            this.resetResults(); // Ù„Ùˆ Ù…ÙÙŠØ´ Ø­Ø¯ Ø®Ø³Ø± Ù„Ø³Ù‡
          }
        },

        // ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
        resetGame() {
          this.players.forEach(p => p.score = 0);
          this.resetResults();
        }
      }
    }
  </script>
</body>
</html>
